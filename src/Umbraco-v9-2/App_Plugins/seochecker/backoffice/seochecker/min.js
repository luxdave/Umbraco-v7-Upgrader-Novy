function valShowerror(){return{restrict:"A",link:function(n,t,i){n.$watch(function(){return n.$eval(i.valShowerror)},function(n){n===!0?t.addClass("highlight-error"):t.removeClass("highlight-error")})}}}angular.module("umbraco").controller("seoChecker.configurationissuesController",function(n,t,i,r,u,f,e){n.loaded=!1;n.initializeData=function(){f.initializeConfigurationIssues().then(function(t){n.loaded=!0;n.model=t.data;e.syncPath(n.model.path)})};n.bindData=function(){f.configurationIssues(n.model).then(function(t){n.loaded=!0;n.model=t.data;e.syncPath(n.model.path)})};n.clearDialog=function(){var t={localizationKey:"seoCheckerBulkActions_bulkActionClearAllConfirmMessage",view:"/app_plugins/seochecker/dialogs/confirm.html",size:"small",submit:function(){f.clearConfigurationIssues().then(function(t){e.showNotification(t.data);n.bindData()});u.close()},close:function(){u.close()}};u.open(t)};n.filter=function(){n.bindData()};n.sort=function(t){n.model.setSortColumn=t;n.bindData()};n.setRecordCount=function(){n.model.resetPaging=!0;n.bindData()};n.goToPage=function(t){n.model.paging.currentPage=t;n.bindData()};n.showResult=function(){return n.model.hasRecords||n.model.filter!=null&&n.model.filter.length>0};n.handleSelectAll=function(){e.handleSelectAll(n.model.selectAll,n.model.data)};n.anyItemSelected=function(){return e.anyItemSelected(n.model.data)};n.isSortDirection=function(t,i){return e.isSortDirection(t,i,n.model.orderByProperty,n.model.orderByDirection)};n.deleteSelected=function(){var t={selectedItems:e.getSelectedItems(n.model.data),view:"/app_plugins/seochecker/dialogs/validation/deleteconfigurationissues.html",size:"small",submit:function(){n.model.resetPaging=!0;n.bindData();u.close()},close:function(){u.close()}};u.open(t)};n.initializeData()});angular.module("umbraco").controller("seoChecker.definitionSettingsController",function(n,t,i,r,u,f,e){function s(t){var i=e.getTabByName(n.model.tabs,t.alias);n.changeTab(i)}var o=[];n.bindData=function(){f.initializeDefinitionSettings(t.id).then(function(t){n.model=t.data;n.loaded=!0;e.syncPath(n.model.path);o.push(u.on("app.tabChange",function(n,t){s(t)}))},function(){e.showServerError()})};n.getActiveTab=function(){if(n.loaded===!0){var t=n.model.tabs[0];return angular.isUndefined(n.model)||angular.isUndefined(n.model.tabs)?{}:(n.model.tabs.forEach(function(n){n.active===!0&&(t=n)}),t)}};n.changeTab=function(t){n.model.tabs.forEach(function(n){n.active=!1});t.active=!0};n.save=function(){f.saveDefinitionSettings(n.model).then(function(t){var i=t.data;e.applyValidationErrors(i,n.model);i.isInValid||(n.frm.$setPristine(),e.showNotification(i.notificationStatus))},function(){e.showServerError()})};n.bindData();n.$on("$destroy",function(){for(var n in o)u.unsubscribe(o[n])})});angular.module("umbraco").controller("seoChecker.deleteController",function(n,t,i,r){n.performDelete=function(){n.currentNode.loading=!0;i.removeNode(n.currentNode);t.deleteTreeNodeById(n.currentNode.id).then(function(){n.currentNode.loading=!1;r.hideMenu()})};n.cancel=function(){r.hideDialog()}});angular.module("umbraco").controller("seoChecker.domainSettingsController",function(n,t,i,r,u,f,e){function s(t){var i=e.getTabByName(n.model.tabs,t.alias);n.changeTab(i)}var o=[];n.bindData=function(){f.initializeDomainSettings(t.id).then(function(t){n.model=t.data;n.loaded=!0;e.syncPath(n.model.path);o.push(u.on("app.tabChange",function(n,t){s(t)}))},function(){e.showServerError()})};n.getActiveTab=function(){if(n.loaded===!0){var t=n.model.tabs[0];return angular.isUndefined(n.model)||angular.isUndefined(n.model.tabs)?{}:(n.model.tabs.forEach(function(n){n.active===!0&&(t=n)}),t)}};n.save=function(){f.saveDomainSettings(n.model).then(function(t){var i=t.data;i.isInValid||(n.frm.$setPristine(),e.showNotification(i.notificationStatus))},function(){e.showServerError()})};n.changeTab=function(t){n.model.tabs.forEach(function(n){n.active=!1});t.active=!0};n.bindData();n.$on("$destroy",function(){for(var n in o)u.unsubscribe(o[n])})});angular.module("umbraco").controller("seoChecker.emailSettingsController",function(n,t,i,r,u,f){n.bindData=function(){u.initializeEmailSettings(t.id).then(function(t){n.model=t.data;n.loaded=!0;f.syncPath(n.model.path)},function(){f.showServerError()})};n.save=function(){u.saveEmailSettings(n.model).then(function(t){n.model=t.data;n.model.isInValid||(f.showNotification(n.model.notificationStatus),n.frm.$setPristine())},function(){f.showServerError()})};n.bindData()});angular.module("umbraco").controller("seoChecker.generalSettingsController",function(n,t,i,r,u,f,e,o){function h(t){var i=o.getTabByName(n.model.tabs,t.alias);n.changeTab(i)}var s=[];n.initialize=function(){e.initializeGeneralSettingsModel().then(function(t){n.bindModelData(t.data)},function(){o.showServerError()})};n.bindData=function(){e.initializeGeneralSettings(n.model).then(function(t){n.bindModelData(t.data)},function(){o.showServerError()})};t.$on("seobooleanCheckbox.changed",function(t,i){i.alias==="enableUrlRewriting"&&n.updateTabModel("rewriteTab");i.alias==="enableRedirectmodule"&&n.updateTabModel("redirectTab");i.alias==="useFaceBook"&&n.updateTabModel("socialTab");i.alias==="useTwitter"&&n.updateTabModel("socialTab");i.alias==="robotsTxtEnabled"&&n.updateTabModel("robotsTxt");i.alias==="xmlSitemapEnabled"&&n.updateTabModel("xmlSitemapTab")});n.bindModelData=function(t){n.model=t;n.loaded=!0;o.syncPath(n.model.path);o.syncPath(n.model.path);s.push(f.on("app.tabChange",function(n,t){h(t)}))};n.getActiveTab=function(){if(n.loaded===!0){var t=n.model.tabs[0];return angular.isUndefined(n.model)||angular.isUndefined(n.model.tabs)?{}:(n.model.tabs.forEach(function(n){n.active===!0&&(t=n)}),t)}};n.changeTab=function(t){n.model.tabs.forEach(function(n){n.active=!1});t.active=!0};n.updateTabModel=function(t){e.initializeGeneralSettings(n.model).then(function(i){o.updateTab(n.model,i.data,t)},function(){o.showServerError()})};n.save=function(){e.saveGeneralSettings(n.model).then(function(t){var i=t.data;i.isInValid||(n.frm.$setPristine(),o.showNotification(i.notificationStatus))},function(){o.showServerError()})};n.initialize();n.$on("$destroy",function(){for(var n in s)f.unsubscribe(s[n])})});angular.module("umbraco").controller("seoChecker.ignoredConfigurationController",function(n,t,i,r,u,f,e,o){n.loaded=!1;n.initialize=function(){e.initializeignoredConfigurationIssues().then(function(t){n.loaded=!0;n.model=t.data;o.syncPath(n.model.path)})};n.bindData=function(){e.ignoredConfigurationIssues(n.model).then(function(t){n.loaded=!0;n.model=t.data;o.syncPath(n.model.path)})};n.filter=function(){n.bindData()};n.sort=function(t){n.model.setSortColumn=t;n.bindData()};n.setRecordCount=function(){n.model.resetPaging=!0;n.bindData()};n.goToPage=function(t){n.model.paging.currentPage=t;n.bindData()};n.showResult=function(){return n.model.hasRecords||n.model.filter!=null&&n.model.filter.length>0};n.handleSelectAll=function(){o.handleSelectAll(n.model.selectAll,n.model.data)};n.anyItemSelected=function(){return o.anyItemSelected(n.model.data)};n.isSortDirection=function(t,i){return o.isSortDirection(t,i,n.model.orderByProperty,n.model.orderByDirection)};n.deleteSelected=function(){var t={localizationKey:"seoCheckerBulkActions_bulkActionDeleteConfirmMessage",view:"/app_plugins/seochecker/dialogs/confirm.html",size:"small",submit:function(){var t=o.getSelectedItems(n.model.data);e.removeIgnoredConfigurationIssues(t).then(function(t){o.showNotification(t.data);n.bindData()});f.close()},close:function(){f.close()}};f.open(t)};n.initialize()});angular.module("umbraco").controller("seoChecker.ignoredInboundlinkissuesController",function(n,t,i,r,u,f,e){n.loaded=!1;n.initialize=function(){f.initializeIgnoredInBoundLinkErrors().then(function(t){n.loaded=!0;n.model=t.data;e.syncPath(n.model.path)})};n.bindData=function(){f.loadAllIgnoredInBoundLinkErrors(n.model).then(function(t){n.loaded=!0;n.model=t.data;e.syncPath(n.model.path)})};n.filter=function(){n.bindData()};n.sort=function(t){n.model.setSortColumn=t;n.bindData()};n.setRecordCount=function(){n.model.resetPaging=!0;n.bindData()};n.goToPage=function(t){n.model.paging.currentPage=t;n.bindData()};n.showResult=function(){return n.model.hasRecords||n.model.filter!=null&&n.model.filter.length>0};n.handleSelectAll=function(){e.handleSelectAll(n.model.selectAll,n.model.data)};n.anyItemSelected=function(){return e.anyItemSelected(n.model.data)};n.isSortDirection=function(t,i){return e.isSortDirection(t,i,n.model.orderByProperty,n.model.orderByDirection)};n.deleteSelected=function(){var t={localizationKey:"seoCheckerBulkActions_bulkActionDeleteConfirmMessage",view:"/app_plugins/seochecker/dialogs/confirm.html",size:"small",submit:function(){var t=e.getSelectedItems(n.model.data);f.removeIgnoredInboundLinkIssues(t).then(function(t){e.showNotification(t.data);n.bindData()});u.close()},close:function(){u.close()}};u.open(t)};n.initialize()});angular.module("umbraco").controller("seoChecker.ignoredValidationqueueController",function(n,t,i,r,u,f,e,o){n.loaded=!1;n.initialize=function(){e.initializeIgnoredValidationIssues().then(function(t){n.loaded=!0;n.model=t.data;o.syncPath(n.model.path)})};n.bindData=function(){e.ignoredValidationIssues(n.model).then(function(t){n.loaded=!0;n.model=t.data;o.syncPath(n.model.path)})};n.filter=function(){n.bindData()};n.sort=function(t){n.model.setSortColumn=t;n.bindData()};n.setRecordCount=function(){n.model.resetPaging=!0;n.bindData()};n.goToPage=function(t){n.model.paging.currentPage=t;n.bindData()};n.showResult=function(){return n.model.hasRecords||n.model.filter!=null&&n.model.filter.length>0};n.handleSelectAll=function(){o.handleSelectAll(n.model.selectAll,n.model.data)};n.anyItemSelected=function(){return o.anyItemSelected(n.model.data)};n.isSortDirection=function(t,i){return o.isSortDirection(t,i,n.model.orderByProperty,n.model.orderByDirection)};n.deleteSelected=function(){var t={localizationKey:"seoCheckerBulkActions_bulkActionDeleteConfirmMessage",view:"/app_plugins/seochecker/dialogs/confirm.html",size:"small",submit:function(){var t=o.getSelectedItems(n.model.data);e.removeIgnoredValidationIssues(t).then(function(t){o.showNotification(t.data);n.bindData()});f.close()},close:function(){f.close()}};f.open(t)};n.initialize()});angular.module("umbraco").controller("seoChecker.inboundlinkissuesController",function(n,t,i,r,u,f,e){n.loaded=!1;n.initialize=function(){f.initializeInBoundLinkErrors().then(function(t){n.loaded=!0;n.model=t.data;e.syncPath(n.model.path)})};n.bindData=function(){f.loadAllInBoundLinkErrors(n.model).then(function(t){n.loaded=!0;n.model=t.data;e.syncPath(n.model.path)})};n.save=function(){f.saveInBoundLinkErrors(n.model.data).then(function(t){n.model=t.data;e.showNotification(n.model.notificationStatus)})};n.filter=function(){n.bindData()};n.sort=function(t){n.model.setSortColumn=t;n.bindData()};n.setRecordCount=function(){n.model.resetPaging=!0;n.bindData()};n.goToPage=function(t){n.model.paging.currentPage=t;n.bindData()};n.showResult=function(){return n.model.hasRecords||n.model.filter!=null&&n.model.filter.length>0};n.handleSelectAll=function(){e.handleSelectAll(n.model.selectAll,n.model.data)};n.anyItemSelected=function(){return e.anyItemSelected(n.model.data)};n.isSortDirection=function(t,i){return e.isSortDirection(t,i,n.model.orderByProperty,n.model.orderByDirection)};n.deleteSelected=function(){var t={selectedItems:e.getSelectedItems(n.model.data),view:"/app_plugins/seochecker/dialogs/redirects/deleteredirects.html",size:"small",submit:function(){n.model.resetPaging=!0;n.bindData();u.close()},close:function(){u.close()}};u.open(t)};n.editRedirect=function(t){var i={redirectid:t,view:"/app_plugins/seochecker/dialogs/redirects/editredirects.html",size:"small",submit:function(){n.model.resetPaging=!0;n.bindData();u.close()},close:function(){u.close()}};u.open(i)};n.showDialog=function(t){var i={multiPicker:!1,startNodeId:null,submit:function(i){t.id=i.selection[0].id;t.name=i.selection[0].name;n.$$phase||n.$apply();u.close()},close:function(){u.close()},idType:"int"};t.contentType==="media"?u.mediaPicker(i):u.contentPicker(i)};n.clear=function(n){n.id=null;n.name=""};n.buttonGroup={defaultButton:{labelKey:"buttons_save",hotKey:"ctrl+s",hotKeyWhenHidden:!1,handler:function(){n.save()}},subButtons:[{labelKey:"seoCheckerBulkActions_bulkActionClearAllButton",hotKey:"ctrl+d",hotKeyWhenHidden:!1,handler:function(){var t={localizationKey:"seoCheckerBulkActions_bulkActionClearAllConfirmMessage",view:"/app_plugins/seochecker/dialogs/confirm.html",size:"small",submit:function(){f.clearInboundLinkIssues().then(function(t){e.showNotification(t.data);n.bindData()});u.close()},close:function(){u.close()}};u.open(t)}}]};n.initialize()});angular.module("umbraco").controller("seoChecker.notificationsController",function(n,t,i,r,u,f){n.bindData=function(){u.initializeNotifications().then(function(t){n.model=t.data;n.loaded=!0;f.syncPath(n.model.path)},function(){f.showServerError()})};n.save=function(){u.saveNotifications(n.model).then(function(t){n.model=t.data;t.data.isInValid||(n.frm.$setPristine(),f.showNotification(n.model.notificationStatus))},function(){f.showServerError()})};n.bindData()});angular.module("umbraco").controller("seoChecker.permissionSettingsController",function(n,t,i,r,u,f){n.bindData=function(){u.initializePermissionSettings().then(function(t){n.model=t.data;n.loaded=!0;f.syncPath(n.model.path)},function(){f.showServerError()})};n.save=function(){u.savePermissionSettings(n.model).then(function(t){var i=t.data;i.isInValid||(n.frm.$setPristine(),f.showNotification(i.notificationStatus))},function(){f.showServerError()})};n.bindData()});angular.module("umbraco").controller("seoChecker.redirectmanagerController",function(n,t,i,r,u,f,e){n.loaded=!1;n.initialize=function(){f.initializeRedirects().then(function(t){n.setData(t.data)})};n.bindData=function(){f.loadAllRedirects(n.model).then(function(t){n.setData(t.data)})};n.setData=function(t){n.loaded=!0;n.model=t;e.syncPath(n.model.path)};n.doExport=function(n){var t=f.getRedirectExportUrl(n);e.downloadFile(t)};n.doImport=function(n){f.importRedirects(n).then(function(){})};n.filter=function(){n.bindData()};n.sort=function(t){n.model.setSortColumn=t;n.bindData()};n.setRecordCount=function(){n.model.resetPaging=!0;n.bindData()};n.goToPage=function(t){n.model.paging.currentPage=t;n.bindData()};n.showResult=function(){return n.model.hasRecords||n.model.filter!=null&&n.model.filter.length>0};n.handleSelectAll=function(){e.handleSelectAll(n.model.selectAll,n.model.data)};n.anyItemSelected=function(){return e.anyItemSelected(n.model.data)};n.isSortDirection=function(t,i){return e.isSortDirection(t,i,n.model.orderByProperty,n.model.orderByDirection)};n.deleteSelected=function(){var t={selectedItems:e.getSelectedItems(n.model.data),view:"/app_plugins/seochecker/dialogs/redirects/deleteredirects.html",size:"small",submit:function(){n.model.resetPaging=!0;n.bindData();u.close()},close:function(){u.close()}};u.open(t)};n.editRedirect=function(t){var i={redirectid:t,view:"/app_plugins/seochecker/dialogs/redirects/editredirects.html",size:"small",submit:function(){n.model.resetPaging=!0;n.bindData();u.close()},close:function(){u.close()}};u.open(i)};n.buttonGroup={defaultButton:{labelKey:"seoCheckerRedirectManager_createButton",hotKey:"ctrl+n",hotKeyWhenHidden:!0,handler:function(){n.editRedirect("0")}},subButtons:[{labelKey:"seoCheckerExportRedirects_exportOptionButton",hotKey:"ctrl+e",hotKeyWhenHidden:!0,handler:function(){var t={view:"/app_plugins/seochecker/dialogs/redirects/exportredirects.html",size:"small",submit:function(t){t!=null&&n.doExport(t);u.close()},close:function(){u.close()}};u.open(t)}},{labelKey:"seoCheckerImportRedirects_importOptionButton",hotKey:"ctrl+i",hotKeyWhenHidden:!0,handler:function(){var t={view:"/app_plugins/seochecker/dialogs/redirects/importredirects.html",size:"small",submit:function(){n.model.resetPaging=!0;n.bindData();u.close()},close:function(){u.close()}};u.open(t)}}]};n.initialize()});angular.module("umbraco").controller("seoChecker.validateController",function(n,t,i,r,u,f){n.bindData=function(){u.initializeValidationForm(t.id).then(function(t){n.model=t.data;n.loaded=!0;f.syncPath(n.model.path);n.setTitle()})};n.selectRoot=function(){r.contentPicker({startNodeId:-1,multiPicker:!1,callback:function(t){n.model.rootNode.id=t.id;n.model.rootNode.name=t.name}})};n.validate=function(){u.validate(n.model).then(function(t){n.model=t.data;n.setTitle();f.showNotification(n.model.notificationStatus);n.frm.$setPristine()})};n.save=function(){u.saveValidation(n.model).then(function(t){n.model=t.data;n.setTitle();n.model.isInValid||(f.syncPath(n.model.path),f.showNotification(n.model.notificationStatus));n.frm.$setPristine()})};n.setTitle=function(){n.model.displayPageName=n.model.scheduledValidation?n.model.scheduleValidationPageName:n.model.pageName};n.buttonGroup={defaultButton:{labelKey:"seoCheckerValidate_validationStart",hotKey:"ctrl+s",buttonStyle:"primary",hotKeyWhenHidden:!0,handler:function(){n.validate()}},subButtons:[{labelKey:"seoCheckerValidate_scheduleButton",hotKey:"ctrl+e",hotKeyWhenHidden:!0,handler:function(){n.model.scheduledValidation=!0;n.setTitle()}}]};n.bindData()});angular.module("umbraco").controller("seoChecker.validationissuesController",function(n,t,i,r,u,f,e){n.loaded=!1;n.initializeData=function(){f.initializevalidationIssues().then(function(t){n.loaded=!0;n.model=t.data;e.syncPath(n.model.path)})};n.bindData=function(){f.validationIssues(n.model).then(function(t){n.loaded=!0;n.model=t.data;e.syncPath(n.model.path)})};n.clearDialog=function(){var t={localizationKey:"seoCheckerBulkActions_bulkActionClearAllConfirmMessage",view:"/app_plugins/seochecker/dialogs/confirm.html",size:"small",submit:function(){f.clearValidationIssues().then(function(t){e.showNotification(t.data);n.bindData()});u.close()},close:function(){u.close()}};u.open(t)};n.filter=function(){n.bindData()};n.sort=function(t){n.model.setSortColumn=t;n.bindData()};n.setRecordCount=function(){n.model.resetPaging=!0;n.bindData()};n.goToPage=function(t){n.model.paging.currentPage=t;n.bindData()};n.showResult=function(){return n.model.hasRecords||n.model.filter!=null&&n.model.filter.length>0};n.handleSelectAll=function(){e.handleSelectAll(n.model.selectAll,n.model.data)};n.anyItemSelected=function(){return e.anyItemSelected(n.model.data)};n.isSortDirection=function(t,i){return e.isSortDirection(t,i,n.model.orderByProperty,n.model.orderByDirection)};n.deleteSelected=function(){var t={selectedItems:e.getSelectedItems(n.model.data),view:"/app_plugins/seochecker/dialogs/validation/deletevalidationissues.html",size:"small",submit:function(){n.model.resetPaging=!0;n.bindData();u.close()},close:function(){u.close()}};u.open(t)};n.revalidateSelected=function(){var t={selectedItems:e.getSelectedItems(n.model.data),view:"/app_plugins/seochecker/dialogs/validation/revalidatevalidationissues.html",size:"small",submit:function(){n.model.resetPaging=!0;n.bindData();u.close()},close:function(){u.close()}};u.open(t)};n.openDocument=function(n){window.open("/umbraco/#/content/content/edit/"+n,"_blank","width = 900, height = 800")};n.openTemplate=function(n){window.open("/umbraco#/settings/templates/edit/"+n,"_blank","width = 900, height = 800")};n.initializeData()});angular.module("umbraco").controller("seoChecker.validationqueueController",function(n,t,i,r,u,f,e){n.loaded=!0;n.bindData=function(){f.initializeValidationqueue().then(function(t){n.loaded=!0;n.model=t.data;e.syncPath(n.model.path)});n.timer=t(n.reloadData,1e4)};n.reloadData=function(){n.CancelTimer();f.validationqueue(n.model).then(function(i){n.loaded=!0;n.model=i.data;n.timer=t(n.reloadData,1e4)})};n.$on("$destroy",function(){n.CancelTimer()});n.CancelTimer=function(){t.cancel(n.timer)};n.clearDialog=function(){var t={localizationKey:"seoCheckerValidationQueue_confirmMessage",view:"/app_plugins/seochecker/dialogs/confirm.html",size:"small",submit:function(){f.clearValidationqueue(n.model).then(function(t){n.model=t.data;e.showNotification(n.model.notificationStatus)});u.close()},close:function(){u.close()}};u.open(t)};n.sort=function(t){n.model.setSortColumn=t;n.reloadData()};n.setRecordCount=function(){n.model.resetPaging=!0;n.reloadData()};n.goToPage=function(t){n.model.paging.currentPage=t;n.reloadData()};n.isSortDirection=function(t,i){return e.isSortDirection(t,i,n.model.orderByProperty,n.model.orderByDirection)};n.bindData()});angular.module("umbraco").controller("seoChecker.dashboardController",function(n,t,i,r,u,f,e){n.bindData=function(){f.initializeDashboard().then(function(t){n.loaded=!0;n.model=t.data})};n.upload=function(){var t=document.getElementById("selectLicenseFile");e.uploadFiles("uploadlicense",t.files[0],function(t){var i=JSON.parse(e.fixJqueryResult(t));f.processLicenseFile(i).then(function(t){var i=t.data;e.showNotification(i.notificationStatus);n.bindData()})})};n.bindData()});angular.module("umbraco").controller("seoChecker.ConfirmDialogController",function(n,t){n.initializeConfirm=function(){t.localize(n.model.localizationKey).then(function(t){n.confirmCaption=t})};n.confirm=function(){n.model&&n.model.close&&n.model.submit()};n.cancel=function(){n.model&&n.model.close&&n.model.close()};n.initializeConfirm()});angular.module("umbraco").controller("seoChecker.DeleteRedirectsController",function(n,t,i,r){n.initializeConfirm=function(){n.parentModel=n.model;i.initializeDeleteRedirects(n.parentModel.selectedItems).then(function(t){n.model=t.data;n.loaded=!0})};n.confirm=function(){i.bulkDeleteRedirects(n.model).then(function(t){n.model=t.data;r.showNotification(n.model.notificationStatus);n.parentModel&&n.parentModel.submit&&n.parentModel.submit()})};n.cancel=function(){n.parentModel&&n.parentModel.close&&n.parentModel.close()};n.initializeConfirm()});angular.module("umbraco").controller("seoChecker.EditRedirectsController",function(n,t,i,r){n.initializeConfirm=function(){n.parentModel=n.model;i.initializeEditRedirect(n.parentModel.redirectid).then(function(t){n.model=t.data;n.loaded=!0;n.$watch("model.tabs['0'].properties[0].value",function(t,u){t!==u&&(r.isNullOrUndefined(t)||i.getContentTypeOfRedirectUrl(t).then(function(t){n.model.tabs[0].properties[1].value.contentType=t.data}))},!0)})};n.save=function(){i.saveRedirect(n.model).then(function(t){var i=t.data;i.isInValid||(r.showNotification(i.notificationStatus),n.parentModel&&n.parentModel.submit&&n.parentModel.submit())})};n.onCancel=function(){n.parentModel&&n.parentModel.close&&n.parentModel.close()};n.initializeConfirm()});angular.module("umbraco").controller("seoChecker.ExportRedirectsController",function(n,t,i){n.initializeExport=function(){n.parentModel=n.model;i.initializeExportRedirects(n.dialogData).then(function(t){n.model=t.data;n.loaded=!0})};n.export=function(){i.exportRedirects(n.model).then(function(t){n.model=t.data;n.model.isInValid||n.parentModel.submit(n.model)})};n.onCancel=function(){n.parentModel&&n.parentModel.close&&n.parentModel.close()};n.initializeExport()});angular.module("umbraco").controller("seoChecker.ImportRedirectsController",function(n,t,i,r,u,f,e){n.initializeImportRedirects=function(){n.parentModel=n.model;i.initializeImportRedirects().then(function(t){n.model=t.data;n.loaded=!0})};n.updateModel=function(){i.redirectUpdateModel(n.model).then(function(t){n.model=t.data;n.loaded=!0})};n.import=function(){i.importRedirects(n.model).then(function(t){n.model=t.data;n.loaded=!0})};n.exportErrors=function(){var t=i.getExportRedirectErrorsUrl(n.model);r.downloadFile(t)};e.$on("seodropdown.changed",function(t,r){r.alias==="worksheet"&&(n.model.resetWorksheet=!0,n.updateModel());r.alias==="importProvider"&&i.bindImportRedirects(n.model).then(function(t){n.model=t.data;n.loaded=!0})});n.upload=function(){var t=document.getElementById("uploadSeoFile");r.uploadFiles("redirectimport",t.files[0],function(t){var i=JSON.parse(r.fixJqueryResult(t));n.model.importFileInfo=i;n.updateModel()})};n.showUploadButton=function(){return angular.isObject(n.model)&&n.model.fileSelected===!1};n.showImportButton=function(){return angular.isObject(n.model)&&n.model.fileSelected===!0&&n.model.fileImported===!1};n.showResult=function(){return angular.isObject(n.model)&&n.model.fileImported===!0};n.hasImportErrors=function(){return angular.isObject(n.model)&&n.model.importErrors>0};n.getTabByName=function(t){return angular.isUndefined(n.model)||angular.isUndefined(n.model.tabs)?{}:r.getTabByName(n.model.tabs,t)};n.onCancel=function(){n.parentModel&&n.parentModel.close&&n.parentModel.close()};n.close=function(){n.parentModel&&n.parentModel.close&&n.parentModel.submit()};n.initializeImportRedirects()});angular.module("umbraco").controller("seoChecker.DeleteConfigurationIssuesController",function(n,t,i,r){n.initializeConfirm=function(){n.parentModel=n.model;i.initializeDeleteConfigurationIssues(n.parentModel.selectedItems).then(function(t){n.model=t.data;n.loaded=!0})};n.confirm=function(){i.bulkDeleteConfigurationIssues(n.model).then(function(t){n.model=t.data;r.showNotification(n.model.notificationStatus);n.parentModel&&n.parentModel.submit&&n.parentModel.submit()})};n.cancel=function(){n.parentModel&&n.parentModel.close&&n.parentModel.close()};n.initializeConfirm()});angular.module("umbraco").controller("seoChecker.DeleteValidationIssuesController",function(n,t,i,r){n.initializeConfirm=function(){n.parentModel=n.model;i.initializeDeleteValidationIssues(n.parentModel.selectedItems).then(function(t){n.model=t.data;n.loaded=!0})};n.confirm=function(){i.bulkDeleteValidationIssues(n.model).then(function(t){n.model=t.data;r.showNotification(n.model.notificationStatus);n.parentModel&&n.parentModel.submit&&n.parentModel.submit()})};n.cancel=function(){n.parentModel&&n.parentModel.close&&n.parentModel.close()};n.initializeConfirm()});angular.module("umbraco").controller("seoChecker.RevalidateValidationIssuesController",function(n,t,i,r,u){n.initialize=function(){n.parentModel=n.model;n.loaded=!1;i.initializeRevalidateIssues(n.parentModel.selectedItems).then(function(t){n.loaded=!0;n.model=t.data;n.timer=u(n.refreshStatus,1e3)})};n.refreshStatus=function(){n.timer=u(n.refreshStatus,1e3);i.refreshRevalidateIssues(n.model).then(function(t){n.model=t.data;n.model.finished===!0&&n.parentModel&&n.parentModel.submit&&n.parentModel.submit()})};n.onCancel=function(){n.parentModel&&n.parentModel.close&&n.parentModel.close()};n.$on("$destroy",function(){n.CancelTimer()});n.CancelTimer=function(){u.cancel(n.timer)};n.initialize()});angular.module("umbraco.directives").directive("seocheckerHeader",function(n){return{transclude:!0,restrict:"E",replace:!0,link:function(t,i){n.localize("SEOChecker").then(function(n){i.html("<h1>"+n+"<\/h1>")})}}});angular.module("umbraco.directives").directive("seocheckerLicenseinfo",function(n){return{transclude:!0,restrict:"E",replace:!0,link:function(t,i){n.getLicenseInfo().then(function(n){n.data.licenseError===!0&&i.html('<div class="alert alert-error seocheckerLicenseInfo">'+n.data.licenseMessage+"<\/div>");n.data.trialLicense===!0&&i.html('<div class="alert alert-warning seocheckerLicenseInfo">'+n.data.licenseMessage+"<\/div>")})}}});angular.module("umbraco.directives").directive("valShowerror",valShowerror);angular.module("umbraco").controller("seoChecker.autovalidationOptionsController",function(n){n.model.value||(n.model.value="always");n.LocalizePrevalue=function(n){return n==="always"?"Always validate automatically":n==="aftersave"?"Automatically validate after save":"Never validate automatically"};n.model.prevalues=["never","always","aftersave"]});angular.module("umbraco").controller("seoChecker.booleanFieldController",function(n,t){n.itemChanged=function(n){n.value=!n.value;t.$broadcast("seobooleanCheckbox.changed",{alias:n.alias,value:n.value})}});angular.module("umbraco").controller("seoChecker.dropdownSelectorController",function(n,t){n.itemChanged=function(n){t.$broadcast("seodropdown.changed",{alias:n.alias,value:n.value.selectedItem})}});angular.module("umbraco").controller("seoChecker.imagePropertyDropdownController",function(n,t,i,r,u,f){n.bindData=function(){u.getAllImageProperties().then(function(t){n.model.items=t.data},function(){f.showServerError()})};n.bindData()});angular.module("umbraco").controller("seoChecker.propertyDropdownController",function(n,t,i,r,u,f){n.bindData=function(){u.getAllProperties().then(function(t){n.model.items=t.data},function(){f.showServerError()})};n.bindData()});angular.module("umbraco").controller("seoChecker.propertySelectorController",function(n,t,i,r,u){n.bindData=function(){u.initializePropertySelectorField(t.id).then(function(t){n.properties=t.data;n.properties.value=n.model.value;n.properties.filterType=n.model.config.propertyTypeFilter;n.initializeValue();n.loaded=!0})};n.initializeValue=function(){u.initializePropertySelectorValue(n.properties).then(function(t){n.properties=t.data;n.model.value=n.properties.value})};n.selectItems=function(){u.selectPropertySelectorFields(n.properties).then(function(t){n.properties=t.data;n.model.value=n.properties.value})};n.deSelectItems=function(){u.deSelectPropertySelectorFields(n.properties).then(function(t){n.properties=t.data;n.model.value=n.properties.value})};n.moveUp=function(){u.moveUpPropertySelectorFields(n.properties).then(function(t){n.properties=t.data;n.model.value=n.properties.value})};n.moveDown=function(){u.moveDownPropertySelectorFields(n.properties).then(function(t){n.properties=t.data;n.model.value=n.properties.value})};n.bindData()});angular.module("umbraco").controller("seoChecker.seocontentPickerController",function(n,t,i,r){n.showDialog=function(){var t={multiPicker:!1,startNodeId:null,submit:function(t){n.model.value.id=t.selection[0].id;n.model.value.name=t.selection[0].name;r.close()},close:function(){r.close()},idType:"int"};n.model.value.contentType==="media"?r.mediaPicker(t):r.contentPicker(t)};n.clear=function(){n.model.value.id=null;n.model.value.name=""}});angular.module("umbraco").controller("seoChecker.notfoundpageFieldController",function(){});angular.module("umbraco").controller("seoChecker.timeSelectorController",function(n){n.bindData=function(){var t,i;for(n.hours=[],t=0;t<24;t++)n.hours.push(t);for(n.minutes=[],i=0;i<60;i++)n.minutes.push(i)};n.bindData()});angular.module("umbraco").controller("seoChecker.redirectsController",function(n,t,i,r,u,f){var e=t.id;n.bindData=function(){i.get("backoffice/SEOChecker/SEOCheckerApi/GetRedirects?id="+e).then(function(t){n.redirects=t.data});f.localize("seoCheckerGeneral_deleteConfirm").then(function(t){n.confirmMessage=t});f.localize("redirectDataType_notificationDeleteTitle").then(function(t){n.notificationDeleteTitle=t});f.localize("redirectDataType_notificationDeleteDescription").then(function(t){n.notificationDeleteDescription=t});f.localize("redirectDataType_notificationSaveTitle").then(function(t){n.notificationSaveTitle=t});f.localize("redirectDataType_notificationSaveDescription").then(function(t){n.notificationSaveDescription=t})};n.deleteRedirect=function(t){confirm(n.confirmMessage)==!0&&i.get("backoffice/SEOChecker/SEOCheckerApi/DeleteRedirect?id="+t).then(function(){n.bindData();u.success(n.notificationDeleteTitle,n.notificationDeleteDescription)})};n.setEditMode=function(t){n.validationResult=null;i.get("backoffice/SEOChecker/SEOCheckerApi/GetEmptyModel?id="+e).then(function(i){n.model.value=i.data;for(var r=0;r<n.redirects.length;r++)n.redirects[r].notFoundId==t&&(n.model.value=n.redirects[r]);n.nodePicked={id:n.model.value.documentID,name:n.model.value.documentName}});n.editMode=!0};n.cancelEditMode=function(){n.editMode=!1};n.submitRedirect=function(){n.model.value.documentID=n.getPickedNodeId();i.post("backoffice/SEOChecker/SEOCheckerApi/SaveRedirect",n.model.value).then(function(t){n.validationResult=t.data;t.data.valid==!0&&(n.bindData(),n.editMode=!1,u.success(n.notificationSaveTitle,n.notificationSaveDescription))})};n.pickContentNode=function(){function t(t){n.nodePicked=t}r.contentPicker({callback:t})};n.getPickedNodeId=function(){return n.nodePicked==null?0:n.nodePicked.id};n.deletePickedNode=function(){n.nodePicked=null};n.bindData()});angular.module("umbraco.resources").factory("seocheckerBackofficeResources",function(n){return{getLicenseInfo:function(){return n.get("backoffice/seochecker/seocheckerlicenseinfoapi/licenseinfo")},initializeValidationForm:function(t){return n.get("backoffice/seochecker/seocheckervalidateapi/initialize",{params:{id:t}})},validate:function(t){return n.post("backoffice/seochecker/seocheckervalidateapi/validate",t)},saveValidation:function(t){return n.post("backoffice/seochecker/seocheckervalidateapi/saveValidation",t)},initializeValidationqueue:function(){return n.post("backoffice/seochecker/seocheckervalidationqueueapi/initializemodel")},validationqueue:function(t){return n.post("backoffice/seochecker/seocheckervalidationqueueapi/initialize",t)},clearValidationqueue:function(t){return n.post("backoffice/seochecker/seocheckervalidationqueueapi/clearvalidationqueue",t)},initializevalidationIssues:function(){return n.post("backoffice/seochecker/validationissuesapi/initializemodel")},validationIssues:function(t){return n.post("backoffice/seochecker/validationissuesapi/initialize",t)},initializeIgnoredValidationIssues:function(){return n.post("backoffice/seochecker/ignoredvalidationissuesapi/initializemodel")},ignoredValidationIssues:function(t){return n.post("backoffice/seochecker/ignoredvalidationissuesapi/initialize",t)},removeIgnoredValidationIssues:function(t){return n.post("backoffice/seochecker/ignoredvalidationissuesapi/removefromignorelist",t)},initializeignoredConfigurationIssues:function(){return n.post("backoffice/seochecker/ignoredconfigurationissuesapi/initializemodel")},ignoredConfigurationIssues:function(t){return n.post("backoffice/seochecker/ignoredconfigurationissuesapi/initialize",t)},removeIgnoredConfigurationIssues:function(t){return n.post("backoffice/seochecker/ignoredconfigurationissuesapi/removefromignorelist",t)},initializeRedirects:function(){return n.post("backoffice/seochecker/redirectmanagementapi/initializemodel")},loadAllRedirects:function(t){return n.post("backoffice/seochecker/redirectmanagementapi/initialize",t)},initializeInBoundLinkErrors:function(){return n.post("backoffice/seochecker/inboundlinkerrorsapi/initializemodel")},loadAllInBoundLinkErrors:function(t){return n.post("backoffice/seochecker/inboundlinkerrorsapi/initialize",t)},saveInBoundLinkErrors:function(t){return n.post("backoffice/seochecker/inboundlinkerrorsapi/saveinboundlinkerrors",t)},initializeIgnoredInBoundLinkErrors:function(){return n.post("backoffice/seochecker/ignoredinboundlinkerrorsapi/initializemodel")},loadAllIgnoredInBoundLinkErrors:function(t){return n.post("backoffice/seochecker/ignoredinboundlinkerrorsapi/initialize",t)},removeIgnoredInboundLinkIssues:function(t){return n.post("backoffice/seochecker/redirectmanagementapi/removefromignorelist",t)},getContentTypeOfRedirectUrl:function(t){return n.get("backoffice/seochecker/redirectmanagementapi/getContentTypeOfRedirectUrl",{params:{redirectUrl:t}})},initializeConfigurationIssues:function(){return n.post("backoffice/seochecker/configurationissuesapi/initializemodel")},configurationIssues:function(t){return n.post("backoffice/seochecker/configurationissuesapi/initialize",t)},initializeNotifications:function(){return n.get("backoffice/seochecker/seocheckernotificationsapi/initialize")},saveNotifications:function(t){return n.post("backoffice/seochecker/seocheckernotificationsapi/save",t)},initializeEmailSettings:function(t){return n.get("backoffice/seochecker/emailsettingsapi/initialize",{params:{emailConfig:t}})},saveEmailSettings:function(t){return n.post("backoffice/seochecker/emailsettingsapi/save",t)},initializeDomainSettings:function(t){return n.get("backoffice/seochecker/domainsettingsapi/initialize",{params:{rootNodeId:t}})},saveDomainSettings:function(t){return n.post("backoffice/seochecker/domainsettingsapi/save",t)},initializeDefinitionSettings:function(t){return n.get("backoffice/seochecker/definitionsettingsapi/initialize",{params:{alias:t}})},saveDefinitionSettings:function(t){return n.post("backoffice/seochecker/definitionsettingsapi/save",t)},initializeGeneralSettingsModel:function(){return n.post("backoffice/seochecker/generalsettingsapi/initializeemptymodel")},initializeGeneralSettings:function(t){return n.post("backoffice/seochecker/generalsettingsapi/initialize",t)},saveGeneralSettings:function(t){return n.post("backoffice/seochecker/generalsettingsapi/save",t)},initializePermissionSettings:function(){return n.get("backoffice/seochecker/permissionsettingsapi/initialize")},savePermissionSettings:function(t){return n.post("backoffice/seochecker/permissionsettingsapi/save",t)},initializePropertySelectorField:function(t){return n.get("backoffice/seochecker/propertyselectorfieldapi/initialize",{params:{alias:t}})},initializePropertySelectorValue:function(t){return n.post("backoffice/seochecker/propertyselectorfieldapi/InitializeValue",t)},selectPropertySelectorFields:function(t){return n.post("backoffice/seochecker/propertyselectorfieldapi/selectitems",t)},deSelectPropertySelectorFields:function(t){return n.post("backoffice/seochecker/propertyselectorfieldapi/deselectitems",t)},moveUpPropertySelectorFields:function(t){return n.post("backoffice/seochecker/propertyselectorfieldapi/moveup",t)},moveDownPropertySelectorFields:function(t){return n.post("backoffice/seochecker/propertyselectorfieldapi/movedown",t)},initializeDeleteRedirects:function(t){return n.post("backoffice/seochecker/deleteredirectsdialogapi/initialize",t)},initializeEditRedirect:function(t){return n.get("backoffice/seochecker/editredirectsdialogapi/initialize",{params:{id:t}})},saveRedirect:function(t){return n.post("backoffice/seochecker/editredirectsdialogapi/save",t)},initializeExportRedirects:function(){return n.get("backoffice/seochecker/exportredirectsdialogapi/initialize")},initializeImportRedirects:function(){return n.post("backoffice/seochecker/importredirectsdialogapi/initializemodel")},bindImportRedirects:function(t){return n.post("backoffice/seochecker/importredirectsdialogapi/initialize",t)},redirectUpdateModel:function(t){return n.post("backoffice/seochecker/importredirectsdialogapi/update",t)},uploadFiles:function(t){return n.post("backoffice/seochecker/fileuploadapi/upload",t,{transformRequest:angular.identity,headers:{"Content-Type":undefined}})},importRedirects:function(t){return n.post("backoffice/seochecker/importredirectsdialogapi/import",t)},getExportRedirectErrorsUrl:function(n){return"backoffice/seochecker/importredirectsdialogapi/exporterrors?id="+n.exportErrorId},exportRedirects:function(t){return n.post("backoffice/seochecker/exportredirectsdialogapi/export",t)},getRedirectExportUrl:function(n){return"backoffice/seochecker/exportredirectsdialogapi/doexport?contentTypeExportOptions="+n.contentTypesToExport.selectedItem+"&dataExportOptions="+n.dataToExport.selectedItem},bulkDeleteRedirects:function(t){return n.post("backoffice/seochecker/deleteredirectsdialogapi/delete",t)},initializeDeleteValidationIssues:function(t){return n.post("backoffice/seochecker/deletevalidationissuesdialogapi/initialize",t)},bulkDeleteValidationIssues:function(t){return n.post("backoffice/seochecker/deletevalidationissuesdialogapi/delete",t)},initializeRevalidateIssues:function(t){return n.post("backoffice/seochecker/revalidateissuesdialogapi/initialize",t)},refreshRevalidateIssues:function(t){return n.post("backoffice/seochecker/revalidateissuesdialogapi/refresh",t,{timeout:100})},initializeDeleteConfigurationIssues:function(t){return n.post("backoffice/seochecker/deleteconfigurationissuesdialogapi/initialize",t)},bulkDeleteConfigurationIssues:function(t){return n.post("backoffice/seochecker/deleteconfigurationissuesdialogapi/delete",t)},clearValidationIssues:function(){return n.post("backoffice/seochecker/validationissuesapi/clearallissues")},clearInboundLinkIssues:function(){return n.post("backoffice/seochecker/redirectmanagementapi/clearallissues")},clearConfigurationIssues:function(){return n.post("backoffice/seochecker/configurationissuesapi/clearallissues")},getAllProperties:function(){return n.get("backoffice/seochecker/prevalueapi/getallproperties")},getAllImageProperties:function(){return n.get("backoffice/seochecker/prevalueapi/getallimageproperties")},initializeDashboard:function(){return n.get("backoffice/seochecker/seocheckerdashboardapi/initialize")},processLicenseFile:function(t){return n.post("backoffice/seochecker/seocheckerdashboardapi/processlicense",t)},deleteTreeNodeById:function(t){return n.get("backoffice/seochecker/treeapi/deleteTreeNode",{params:{id:t}})}}});angular.module("umbraco").controller("seoChecker.seoCheckerPropertyEditorController",function(n,t,i,r,u){var f=u.isNullOrUndefined(t.cculture)?t.mculture:t.cculture;n.titleLengthVisible=function(){return n.editMode&&n.model.value.seoTitle.length>0};n.descriptionLengthVisible=function(){return n.editMode&&n.model.value.seoDescription.length>0};n.initializeEditor=function(){n.blueprintMode=n.model.value.isBluePrint===!0;n.editMode=n.model.value.isBluePrint===!1&&t.section==="content";n.watchChanges()};n.validateTitleLength=function(){if(n.editMode){var t=n.model.value.config.maxTitleLength;n.seoTitleLength=n.parseTemplate(n.model.value.seoTitle).length;n.seoTitleLengthClass=n.seoTitleLength>t?"error":"valid"}};n.validateDescriptionLength=function(){if(n.editMode){var t=n.model.value.config.maxDescriptionLength,i=n.model.value.config.minDescriptionLength;n.seoDescriptionLength=n.model.value.seoDescription.length;n.seoDescriptionLengthClass=n.model.value.seoDescription.length<i||n.model.value.seoDescription.length>t?"error":"valid"}};n.parseTemplate=function(t){return(t=u.encodeHtmlBrackets(t),n.editMode&&n.model.value.snippetTitleTemplate.indexOf("@@seotitle@@")!=-1)?n.model.value.snippetTitleTemplate.replace("@@seotitle@@",t):t};n.formatTitle=function(){if(n.editMode){var t=n.model.value.seoTitle;return t==""&&(t=n.model.value.defaultTitlePropertyValue),t=n.parseTemplate(t),t=n.getFirst(t,"",n.model.config.maxTitleLength),n.parseKeyword(n.model.value.focusKeyword,t)}return""};n.formatSnippetUrl=function(){if(n.editMode){var t=n.model.value.snippetUrl.replace("http://","");return n.parseKeyword(n.model.value.focusKeyword,t)}return""};n.formatDescription=function(){if(n.editMode){var t=n.model.value.seoDescription;return t=u.encodeHtmlBrackets(t),t==""&&(t=n.model.value.defaultDescriptionValue),t=n.getFirst(t,"...",n.model.config.maxDescriptionLength),n.parseKeyword(n.model.value.focusKeyword,t)}return""};n.parseKeyword=function(t,i){var r,u,e,f;if(n.editMode){if(!(t==null||i==null)){for(r=n.parseText(i),u=0;u<r.length;u++)for(e=t.split(" "),f=0;f<e.length;f++)e[f].length>0&&e[f].toLowerCase()==r[u].toLowerCase()&&(r[u]="<strong>"+r[u]+"<\/strong>");i=r.join("")}return i}return""};n.parseText=function(n){for(var i=[],r=[],u=[" ",'"',",",".",":",";"],t=0;t<n.length;t++)u.indexOf(n[t])>=0?(i.push(r.join("")),i.push(n[t]),r=[]):r.push(n[t]);return i.push(r.join("")),i};n.openKeywordSelectionTool=function(){return window.open(n.model.value.config.keywordSelectionTool,"_blank","width=900,height=700"),!1};n.getFirst=function(n,t,i){return n.length>i&&(n=n.substring(0,i)+t),n};n.doValidatePage=function(){var t={nodeId:i.getCurrent().id,culture:f,focusKeyword:n.model.value.focusKeyword};n.showValidationResult=!0;n.validationResult=null;n.validatingPage=!0;r.post("backoffice/SEOChecker/SEOCheckerApi/Validate",t).then(function(t){n.validationResult=t.data;n.validatingPage=!1})};n.watchChanges=function(){n.editMode&&(n.$watch("model.value.requestId",function(){n.shouldResetModel()?n.resetModel():(n.model.value.config.validationMode==="always"||n.postback&&n.model.value.config.validationMode==="onsave")&&n.doValidatePage();n.postback=!0}),n.validateTitleLength(),n.validateDescriptionLength())};n.shouldResetModel=function(){return n.model.value.documentId===0&&i.getCurrent().id>0};n.resetModel=function(){n.model.value.documentId=i.getCurrent().id;r.post("backoffice/SEOChecker/SEOCheckerApi/resetModel",n.model.value).then(function(t){n.model.value=t.data;n.initializeEditor()})};u.isNullOrUndefined(n.model.value)?n.definitionMode=!0:n.shouldResetModel()?n.resetModel():n.initializeEditor()});angular.module("umbraco.services").factory("seocheckerHelper",function(n,t,i,r){var u={showNotification:function(t){t.isError===!1?n.success(t.header,t.description):n.error(t.header,t.description)},showServerError:function(){n.error("Server error","A server error occured")},applyValidationErrors:function(n,t){t.isInValid=n.isInValid;t.validationMessages=n.validationMessages},syncPath:function(n){t.syncTree({tree:"seochecker",path:n})},isSortDirection:function(n,t,i,r){return n===i&&t===r},handleSelectAll:function(n,t){angular.forEach(t,function(t){t.selected=n})},getSelectedItems:function(n){var t=[];return angular.forEach(n,function(n){n.selected===!0&&t.push(n)}),t},anyItemSelected:function(n){var t=!1;return angular.forEach(n,function(n){if(n.selected===!0){t=!0;return}}),t===!0},downloadFile:function(n){var t=document.createElement("a");t.id="downloadframe";t.style.display="none";document.body.appendChild(t);t.href=n;t.click();r(function(){document.body.removeChild(t)},1e3)},fixJqueryResult:function(n){return n.replace(")]}',","")},uploadFiles:function(n,t,i){var u=new FormData,r;u.set("folderName",n);u.set("file",t,t.name);r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState===4&&i(r.responseText)};r.open("POST","backoffice/seochecker/fileuploadapi/upload");r.send(u)},getTabByName:function(n,t){for(var i=0;i<n.length;i++)if(n[i].alias===t)return n[i];return{active:!1,alias:"emptyTab",id:-1,label:"empty",properties:[]}},updateTab:function(n,t,i){var r=u.getTabByName(t.tabs,i),f=u.getTabByName(n.tabs,i);f.properties=r.properties},isNullOrUndefined:function(n){return n===null||angular.isUndefined(n)},encodeHtmlBrackets:function(n){return u.isNullOrUndefined(n)||(n=n.replace("<","&lt;"),n=n.replace(">","&gt;")),n}};return u});angular.module("umbraco").controller("seoChecker.seoCheckerSocialPropertyEditorController",function(n,t,r,u,f){function e(t,i,r){return{editor:"Umbraco.MediaPicker",label:i,description:r,hideLabel:!1,view:"mediapicker",alias:t,value:n.getSocialImageValue(),validation:{mandatory:!1,pattern:""},config:{multiPicker:!1}}}f.isNullOrUndefined(n.model.value)?n.definitionMode=!0:n.blueprintMode=n.model.value.isBluePrint===!0;n.socialImageOrientation="Landscape";n.setClass=function(n){var t=n.cssClass;return n.selected&&(t=t+"-active"),"social socialbutton "+t};n.activePreviewType=function(){return!0};n.setFirstItemActive=function(){if(n.editMode){var t=n.model.value.config.socialNetworkOptionsConfig;t.length>0&&n.setActive(t[0],t)}};n.setActive=function(t,r){for(i=0;i<r.length;i++)r[i].selected=!1;t.selected=!0;n.model.activeNetwork=t};n.parseOgTemplate=function(t){return(t=f.encodeHtmlBrackets(t),n.editMode&&n.model.value.ogSnippetTitleTemplate.indexOf("@@seotitle@@")!=-1)?n.model.value.ogSnippetTitleTemplate.replace("@@seotitle@@",t):t};n.parseTwitterTemplate=function(t){return(t=f.encodeHtmlBrackets(t),n.editMode&&n.model.value.twitterSnippetTitleTemplate.indexOf("@@seotitle@@")!=-1)?n.model.value.twitterSnippetTitleTemplate.replace("@@seotitle@@",t):t};n.renderSocialImage=function(){n.editMode&&(f.isNullOrUndefined(n.model.value.socialImage)?f.isNullOrUndefined(n.model.value.defaultImageValue)?n.socialImageUrl=null:(n.socialImageUrl=n.model.value.defaultImageValue.mediaUrl,n.socialImageOrientation=n.model.value.defaultImageValue.imageOrientation):(n.socialImageUrl=n.model.value.socialImage.mediaUrl,n.socialImageOrientation=n.model.value.socialImage.imageOrientation),f.isNullOrUndefined(n.socialImageUrl)?(n.socialFacebookImage=null,n.socialTwitterImage=null,n.socialTwitterLargeImage=null,n.socialImageOrientation=null):(n.socialFacebookImage=n.socialImageOrientation==="Landscape"?n.socialImageUrl+"?width=600&height=314&mode=crop":n.socialImageUrl+"?width=171&height=259&mode=crop",n.socialTwitterImage=n.socialImageUrl+"?width=135&height=135&mode=crop",n.socialTwitterLargeImage=n.socialImageUrl+"?width=600&height=314&mode=crop"))};n.formatOgTitle=function(){if(n.editMode){var t=n.model.value.ogTitle;return t==""&&(t=n.model.value.defaultTitlePropertyValue),t=n.parseOgTemplate(t),n.getFirst(t,"",60)}return""};n.formatTwitterTitle=function(){if(n.editMode){var t=n.model.value.twitterTitle;return t==""&&(t=n.model.value.defaultTitlePropertyValue),t=n.parseTwitterTemplate(t),n.getFirst(t,"",60)}return""};n.formatOgDescription=function(){if(n.editMode){var t=n.model.value.ogDescription;return t==""&&(t=n.model.value.defaultDescriptionValue),t=n.getFirst(t,"...",n.model.config.maxDescriptionLength),f.encodeHtmlBrackets(t)}return""};n.formatTwitterDescription=function(){if(n.editMode){var t=n.model.value.twitterDescription;return t==""&&(t=n.model.value.defaultDescriptionValue),t=n.getFirst(t,"...",n.model.config.maxDescriptionLength),f.encodeHtmlBrackets(t)}return""};n.getFirst=function(n,t,i){return n.length>i&&(n=n.substring(0,i)+t),n};n.watchSocialImageChange=function(){n.editMode&&n.$watch("imagePicker.model.value",function(){f.isNullOrUndefined(n.imagePicker.model.value)||n.imagePicker.model.value==""?(n.imagePicker.selectedItem=null,n.model.value.socialImage=null,n.renderSocialImage()):u.get("backoffice/SEOChecker/SEOCheckerApi/GetSocialImage?mediaId="+n.imagePicker.model.value).then(function(t){n.model.value.socialImage=t.data;n.renderSocialImage()})})};n.imagePicker={model:{editor:"Umbraco.MediaPicker",label:"Image",description:"",hideLabel:!1,view:"mediapicker",alias:"socialImage",validation:{mandatory:!1,pattern:""},config:{multiPicker:!1}},existingValue:null,hasValue:!1};n.getSocialImageValue=function(){return!f.isNullOrUndefined(n.model.value)&&!f.isNullOrUndefined(n.model.value.socialImage)?n.model.value.socialImage.udi:null};n.initializeEditor=function(){n.editMode=n.model.value.isBluePrint===!1&&t.section==="content";n.imagePicker.model=e("socialImage","Image","Social image picker");n.setFirstItemActive();n.watchSocialImageChange();n.renderSocialImage();n.watchChanges()};n.watchChanges=function(){n.editMode&&n.$watch("model.value.requestId",function(){n.shouldResetModel()&&n.resetModel();n.postback=!0})};n.shouldResetModel=function(){return n.model.value.documentId===0&&r.getCurrent().id>0};n.resetModel=function(){n.model.value.documentId=r.getCurrent().id;u.post("backoffice/SEOChecker/SEOCheckerApi/resetSocialModel",n.model.value).then(function(t){n.model.value=t.data;n.initializeEditor()})};f.isNullOrUndefined(n.model.value)?n.definitionMode=!0:n.shouldResetModel()?n.resetModel():n.initializeEditor()});